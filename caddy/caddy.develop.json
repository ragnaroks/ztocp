{
  "apps": {
    "http": {
      "servers": {
        "ztocp": {
          "listen": ["127.0.0.1:9994"],
          "routes": [
            {
              "match":[
                {
                  "path":["/zerotier*"]
                }
              ],
              "handle":[
                {
                  "handler": "reverse_proxy",
                  "transport":{
                    "protocol":"http",
                    "keep_alive":{
                      "enabled":true,
                      "probe_interval":30,
                      "max_idle_conns":2
                    }
                  },
                  "upstreams":[
                    {"dial":"127.0.0.1:9993"}
                  ],
                  "headers":{
                    "request":{
                      "add":{
                        "X-ZT1-AUTH":["cgaydu2bb86joooaz8qwyj5p"]
                      }
                    }
                  },
                  "rewrite":{
                    "strip_path_prefix":"/zerotier"
                  }
                }
              ]
            },{
              "match":[
                {
                  "path":["*"]
                }
              ],
              "handle":[
                {
                  "handler": "reverse_proxy",
                  "transport":{
                    "protocol":"http"
                  },
                  "upstreams":[
                    {"dial":"127.0.0.1:3000"}
                  ]
                }
              ]
            }
          ],
          "automatic_https":{
            "disable":true
          }
        }
      }
    }
  }
}
